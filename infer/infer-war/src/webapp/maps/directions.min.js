function filterPois(t){$(".poi-radar-item").css("display","block"),null!==t&&$(".poi-radar-item:not(:contains('"+t+"'))").css("display","none")}function setAllMap(t,e){for(var i=0;e.length>i;i++)e[i].setMap(t)}function clearMarkers(t){setAllMap(null,t),console.debug("clearing markers")}function randomFromArray(t){return t[Math.floor(Math.random()*t.length)]}function calcDistance(t,e,i,r){return google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(t,e),new google.maps.LatLng(i,r))}function addPoi(t){getPlaceId(t)}function getPlaceId(t){var e=new google.maps.LatLng(t.lat,t.lng),i={location:e,radius:500,query:t.name};placesService.textSearch(i,function(t,e){e==google.maps.places.PlacesServiceStatus.OK?getPlaceInfo(t[0].place_id):(console.debug("place ID lookup error:"),console.debug(e),console.debug("failed request: "),console.debug(i))})}function getPlaceInfo(t){var e={placeId:t};setTimeout(function(){placesService.getDetails(e,function(t,i){i==google.maps.places.PlacesServiceStatus.OK?addPlaceDetails(t):(console.debug("place detail lookup error:"),console.debug(i),console.debug("failed request: "),console.debug(e))})},urlOptions.queryDelay)}function addPlaceDetails(t){makePoiMarker(t),setTimeout(function(){$("#"+t.anchor+"-marker").tooltip({title:t.name,trigger:"manual"})},100),t.photos!==void 0&&(t.imageUrl=t.photos[0].getUrl({maxWidth:500,maxHeight:500})),t.anchor=t.name.replace(/\s+/g,"").toLowerCase().replace(/\W/g,"");var e=$("#poi-template").html(),i=Handlebars.compile(e),r=i(t);$("#poi-radar-list").append(r),console.debug(t.rating),t.rating!==void 0&&$(".rateme").raty({score:t.rating,readOnly:!0}),$(".rateme").removeClass("rateme")}function makePoiMarker(t){marker=new google.maps.Marker({position:t.geometry.location,map:map,title:t.name,icon:{scaledSize:new google.maps.Size(iconSize.width,iconSize.height),url:t.icon}}),t.anchor=t.name.replace(/\s+/g,"").toLowerCase().replace(/\W/g,""),marker2=new RichMarker({position:t.geometry.location,flat:!0,map:map,title:t.name,draggable:!1,content:'<div style="width: '+iconSize.width+"px; height: "+iconSize.width+'px" id="'+t.anchor+'-marker">&nbsp;</div>'}),google.maps.event.addListener(marker,"mouseover",function(){$("#"+t.anchor+"-marker").tooltip("show")}),google.maps.event.addListener(marker,"mouseout",function(){$("#"+t.anchor+"-marker").tooltip("hide")}),google.maps.event.addListener(marker,"click",function(){snapper.open("left"),window.location.hash=t.anchor}),poiMarkers.push(marker),poiRichMarkers.push(marker2)}function RichMarker(t){var e=t||{};this.ready_=!1,this.dragging_=!1,void 0==t.visible&&(t.visible=!0),void 0==t.shadow&&(t.shadow="7px -3px 5px rgba(88,88,88,0.7)"),void 0==t.anchor&&(t.anchor=RichMarkerPosition.BOTTOM),this.setValues(e)}function radarControl(){var t=document.createElement("div");t.id="slider-button",new RadarControl(t,map),t.index=1,map.controls[google.maps.ControlPosition.TOP_RIGHT].push(t)}function RadarControl(t){t.style.padding="5px";var e=document.createElement("div");e.className="map-button-active",e.title="Nearby Points Of Interest",t.appendChild(e);var i=document.createElement("div");i.innerHTML="Point Of Interest Radar",e.appendChild(i),google.maps.event.addDomListener(e,"click",function(){snapper.open("left")})}function directionsControl(){var t=document.createElement("div");t.id="slider-button",new DirectionsControl(t,map),t.index=1,map.controls[google.maps.ControlPosition.TOP_RIGHT].push(t)}function DirectionsControl(t){t.style.padding="5px";var e=document.createElement("div");e.className="map-button-inactive",e.title="Directions",t.appendChild(e);var i=document.createElement("div");i.innerHTML="Directions",e.appendChild(i),google.maps.event.addDomListener(e,"click",function(){snapper.open("right")})}function initialize(){var t={draggable:!1};directionsDisplay=new google.maps.DirectionsRenderer(t),directionsService=new google.maps.DirectionsService;var e={zoom:11,center:new google.maps.LatLng(39.30088028658069,-76.52182180175782)};map=new google.maps.Map(document.getElementById("map-canvas"),e),placesService=new google.maps.places.PlacesService(map),directionsDisplay.setMap(map),directionsDisplay.setPanel(document.getElementById("directions-drawer")),polyline=new google.maps.Polyline({path:[],strokeColor:"#FF0000",strokeWeight:3}),poly2=new google.maps.Polyline({path:[],strokeColor:"#FF0000",strokeWeight:3}),radarControl(),directionsControl(),getJSONdata()}function calcRoute(t,e){var r={origin:t,destination:e,travelMode:google.maps.TravelMode.DRIVING};console.log("about to make directions request"),console.log(r),directionsService.route(r,function(t,e){if(e==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(t);var r=new google.maps.LatLngBounds;t.routes[0],startLocation={},endLocation={},t.routes[0].overview_path;var s=t.routes[0].legs;for(i=0;s.length>i;i++){0==i&&(startLocation.latlng=s[i].start_location,startLocation.address=s[i].start_address,travelMarker=createMarker(s[i].start_location,"start",s[i].start_address,"green")),endLocation.latlng=s[i].end_location,endLocation.address=s[i].end_address;var n=s[i].steps;for(j=0;n.length>j;j++){var a=n[j].path;for(k=0;a.length>k;k++)polyline.getPath().push(a[k]),r.extend(a[k])}}polyline.setMap(map),map.fitBounds(r),map.setZoom(18)}else console.debug(e)})}function getJSONdata(){var t="http://b.ss.cx/scottstreit.com:8080/infer/rest/listTracksNextEvent?name="+urlOptions.name+"&email="+urlOptions.email+"&poisPerPoint="+urlOptions.poisPerPoint+"&iter="+urlOptions.iter;console.log(t),$.getJSON(t,function(t){console.log(t);var e=0;$.each(t.routes[0].legs[0].steps,function(t,i){e+=i.distance.value,stepDistances.push(e)});var i=new google.maps.LatLng(t.routes[0].legs[0].start_location.lat,t.routes[0].legs[0].start_location.lng);destinationPoint=new google.maps.LatLng(t.routes[0].legs[0].end_location.lat,t.routes[0].legs[0].end_location.lng),calcRoute(i,destinationPoint,t),$.each(t.infferedPOIs,function(t,e){setTimeout(function(){addPoi(e)},2*urlOptions.queryDelay*t),"true"===urlOptions.removePois&&poiRemovalLocations.push({actLat:e.actLat,actLng:e.actLng,name:e.name,lat:e.lat,lng:e.lng})}),"true"===urlOptions.removePois?setTimeout(function(){console.log("starting animation!"),startAnimation()},2*urlOptions.queryDelay*(t.infferedPOIs.length+2)):startAnimation()})}function updatePoly(t){poly2.getPath().getLength()>20&&(poly2=new google.maps.Polyline([polyline.getPath().getAt(lastVertex-1)])),lastVertex+2>polyline.GetIndexAtDistance(t)?(poly2.getPath().getLength()>1&&poly2.getPath().removeAt(poly2.getPath().getLength()-1),poly2.getPath().insertAt(poly2.getPath().getLength(),polyline.GetPointAtDistance(t))):poly2.getPath().insertAt(poly2.getPath().getLength(),endLocation.latlng)}function animate(t){if(t>stepDistances[0]&&($("tbody").find("tr:first").remove(),stepDistances.shift()),t>eol)return travelMarker.setPosition(endLocation.latlng),void 0;var e=polyline.GetPointAtDistance(t);if("true"===urlOptions.removePois&&$.each(poiRemovalLocations,function(t,i){if(i!==void 0&&e!==void 0&&null!==e&&calcDistance(i.actLat,i.actLng,e.lat(),e.lng())<=urlOptions.step){for(var r=poiRichMarkers.length-1;r>=0;r--)poiRichMarkers[r].getPosition().lat().toFixed(6)==i.lat&&poiRichMarkers[r].getPosition().lng().toFixed(6)==i.lng&&poiRichMarkers[r].setMap(null);for(var r=poiMarkers.length-1;r>=0;r--)poiMarkers[r].getPosition().lat().toFixed(6)==i.lat&&poiRichMarkers[r].getPosition().lng().toFixed(6)==i.lng&&poiMarkers[r].setMap(null)}}),travelMarker.setPosition(e),updatePoly(t),null===e){urlOptions.iter++;var i=window.location.href.split("?")[0]+"?iter="+urlOptions.iter+"&queryDelay="+urlOptions.queryDelay+"&step="+urlOptions.step+"&tick="+urlOptions.tick+"&poisPerPoint="+urlOptions.poisPerPoint+"&removePois="+urlOptions.removePois+"&name="+urlOptions.name+"&email"+urlOptions.email;console.log(i),window.location=i}timerHandle=setTimeout("animate("+(t+urlOptions.step)+")",urlOptions.tick)}function startAnimation(){poly2=new google.maps.Polyline({path:[polyline.getPath().getAt(0)],strokeColor:"#0000FF",strokeWeight:10}),setTimeout(function(){console.log($("td[jscontent=\"($index + 1) + '.'\"]").css("display","none")),$("tbody").find("tr:first").remove(),animate(50)},1e3)}function createMarker(t,e,i){var r="<b>"+e+"</b><br>"+i,s=new google.maps.Marker({position:t,map:map,title:e,zIndex:Math.round(-1e5*t.lat())<<5});return s.myname=e,google.maps.event.addListener(s,"click",function(){infowindow.setContent(r),infowindow.open(map,s)}),s}(function(t){"function"==typeof define&&define.amd?define(t):window.purl=t()})(function(){function t(t,e){for(var i=decodeURI(t),r=f[e?"strict":"loose"].exec(i),s={attr:{},param:{},seg:{}},a=14;a--;)s.attr[g[a]]=r[a]||"";return s.param.query=n(s.attr.query),s.param.fragment=n(s.attr.fragment),s.seg.path=s.attr.path.replace(/^\/+|\/+$/g,"").split("/"),s.seg.fragment=s.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),s.attr.base=s.attr.host?(s.attr.protocol?s.attr.protocol+"://"+s.attr.host:s.attr.host)+(s.attr.port?":"+s.attr.port:""):"",s}function e(t){var e=t.tagName;return e!==void 0?u[e.toLowerCase()]:e}function i(t,e){if(0===t[e].length)return t[e]={};var i={};for(var r in t[e])i[r]=t[e][r];return t[e]=i,i}function r(t,e,s,n){var a=t.shift();if(a){var o=e[s]=e[s]||[];"]"==a?l(o)?""!==n&&o.push(n):"object"==typeof o?o[c(o).length]=n:o=e[s]=[e[s],n]:~a.indexOf("]")?(a=a.substr(0,a.length-1),!m.test(a)&&l(o)&&(o=i(e,s)),r(t,o,a,n)):(!m.test(a)&&l(o)&&(o=i(e,s)),r(t,o,a,n))}else l(e[s])?e[s].push(n):e[s]="object"==typeof e[s]?n:e[s]===void 0?n:[e[s],n]}function s(t,e,i){if(~e.indexOf("]")){var s=e.split("[");r(s,t,"base",i)}else{if(!m.test(e)&&l(t.base)){var n={};for(var o in t.base)n[o]=t.base[o];t.base=n}""!==e&&a(t.base,e,i)}return t}function n(t){return h((t+"").split(/&|;/),function(t,e){try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}var r=e.indexOf("="),n=o(e),a=e.substr(0,n||r),h=e.substr(n||r,e.length);return h=h.substr(h.indexOf("=")+1,h.length),""===a&&(a=e,h=""),s(t,a,h)},{base:{}}).base}function a(t,e,i){var r=t[e];r===void 0?t[e]=i:l(r)?r.push(i):t[e]=[r,i]}function o(t){for(var e,i,r=t.length,s=0;r>s;++s)if(i=t[s],"]"==i&&(e=!1),"["==i&&(e=!0),"="==i&&!e)return s}function h(t,e){for(var i=0,r=t.length>>0,s=arguments[2];r>i;)i in t&&(s=e.call(void 0,s,t[i],i,t)),++i;return s}function l(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}function p(e,i){return 1===arguments.length&&e===!0&&(i=!0,e=void 0),i=i||!1,e=e||""+window.location,{data:t(e,i),attr:function(t){return t=d[t]||t,t!==void 0?this.data.attr[t]:this.data.attr},param:function(t){return t!==void 0?this.data.param.query[t]:this.data.param.query},fparam:function(t){return t!==void 0?this.data.param.fragment[t]:this.data.param.fragment},segment:function(t){return t===void 0?this.data.seg.path:(t=0>t?this.data.seg.path.length+t:t-1,this.data.seg.path[t])},fsegment:function(t){return t===void 0?this.data.seg.fragment:(t=0>t?this.data.seg.fragment.length+t:t-1,this.data.seg.fragment[t])}}}var u={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},g=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],d={anchor:"fragment"},f={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},m=/^[0-9]+$/;return p.jQuery=function(t){null!=t&&(t.fn.url=function(i){var r="";return this.length&&(r=t(this).attr(e(this[0]))||""),p(r,i)},t.url=p)},p.jQuery(window.jQuery),p}),$(document).ready(function(){$("#filter-food").click(function(){$(".filterbutton").removeClass("active"),$("#filter-food").addClass("active"),filterPois("food")}),$("#filter-drink").click(function(){$(".filterbutton").removeClass("active"),$("#filter-drink").addClass("active"),filterPois("bar")}),$("#filter-play").click(function(){$(".filterbutton").removeClass("active"),$("#filter-play").addClass("active"),filterPois("park")}),$("#filter-all").click(function(){$(".filterbutton").removeClass("active"),$("#filter-all").addClass("active"),filterPois(null)})}),google.maps.LatLng.prototype.distanceFrom=function(t){var e=6378137,i=this.lat(),r=this.lng(),s=t.lat(),n=t.lng(),a=(s-i)*Math.PI/180,o=(n-r)*Math.PI/180,h=Math.sin(a/2)*Math.sin(a/2)+Math.cos(i*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),c=e*l;return c},google.maps.LatLng.prototype.latRadians=function(){return this.lat()*Math.PI/180},google.maps.LatLng.prototype.lngRadians=function(){return this.lng()*Math.PI/180},google.maps.Polygon.prototype.Contains=function(t){for(var e=0,i=!1,r=t.lng(),s=t.lat(),n=0;this.getPath().getLength()>n;n++)e++,e==this.getPath().getLength()&&(e=0),(s>this.getPath().getAt(n).lat()&&this.getPath().getAt(e).lat()>=s||s>this.getPath().getAt(e).lat()&&this.getPath().getAt(n).lat()>=s)&&r>this.getPath().getAt(n).lng()+(s-this.getPath().getAt(n).lat())/(this.getPath().getAt(e).lat()-this.getPath().getAt(n).lat())*(this.getPath().getAt(e).lng()-this.getPath().getAt(n).lng())&&(i=!i);return i},google.maps.Polygon.prototype.Area=function(){for(var t=0,e=0,i=this.Bounds(),r=i.getSouthWest().lng(),s=i.getSouthWest().lat(),n=0;this.getPath().getLength()>n;n++){e++,e==this.getPath().getLength()&&(e=0);var a=this.getPath().getAt(n).distanceFrom(new google.maps.LatLng(this.getPath().getAt(n).lat(),r)),o=this.getPath().getAt(e).distanceFrom(new google.maps.LatLng(this.getPath().getAt(e).lat(),r)),h=this.getPath().getAt(n).distanceFrom(new google.maps.LatLng(s,this.getPath().getAt(n).lng())),l=this.getPath().getAt(e).distanceFrom(new google.maps.LatLng(s,this.getPath().getAt(e).lng()));t+=a*l-o*h}return Math.abs(.5*t)},google.maps.Polygon.prototype.Distance=function(){for(var t=0,e=1;this.getPath().getLength()>e;e++)t+=this.getPath().getAt(e).distanceFrom(this.getPath().getAt(e-1));return t},google.maps.Polygon.prototype.Bounds=function(){for(var t=new google.maps.LatLngBounds,e=0;this.getPath().getLength()>e;e++)t.extend(this.getPath().getAt(e));return t},google.maps.Polygon.prototype.GetPointAtDistance=function(t){if(0==t)return this.getPath().getAt(0);if(0>t)return null;if(2>this.getPath().getLength())return null;for(var e=0,i=0,r=1;this.getPath().getLength()>r&&t>e;r++)i=e,e+=this.getPath().getAt(r).distanceFrom(this.getPath().getAt(r-1));if(t>e)return null;var s=this.getPath().getAt(r-2),n=this.getPath().getAt(r-1),a=(t-i)/(e-i);return new google.maps.LatLng(s.lat()+(n.lat()-s.lat())*a,s.lng()+(n.lng()-s.lng())*a)},google.maps.Polygon.prototype.GetPointsAtDistance=function(t){var e=t,i=[];if(0>=t)return i;for(var r=0,s=0,n=1;this.getPath().getLength()>n;n++)for(s=r,r+=this.getPath().getAt(n).distanceFrom(this.getPath().getAt(n-1));r>e;){var a=this.getPath().getAt(n-1),o=this.getPath().getAt(n),h=(e-s)/(r-s);i.push(new google.maps.LatLng(a.lat()+(o.lat()-a.lat())*h,a.lng()+(o.lng()-a.lng())*h)),e+=t}return i},google.maps.Polygon.prototype.GetIndexAtDistance=function(t){if(0==t)return this.getPath().getAt(0);if(0>t)return null;for(var e=0,i=0,r=1;this.getPath().getLength()>r&&t>e;r++)i=e,e+=this.getPath().getAt(r).distanceFrom(this.getPath().getAt(r-1));return t>e?null:r},google.maps.Polygon.prototype.Bearing=function(t,e){if(null==t?(t=0,e=this.getPath().getLength()-1):null==e&&(e=t+1),!(0>t||t>=this.getPath().getLength()||0>e||e>=this.getPath().getLength())){var i=this.getPath().getAt(t),r=this.getPath().getAt(e);if(i.equals(r))return 0;var s=i.latRadians(),n=i.lngRadians(),a=r.latRadians(),o=r.lngRadians(),h=-Math.atan2(Math.sin(n-o)*Math.cos(a),Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(n-o));return 0>h&&(h+=2*Math.PI),h=180*h/Math.PI,parseFloat(h.toFixed(1))}},google.maps.Polyline.prototype.Contains=google.maps.Polygon.prototype.Contains,google.maps.Polyline.prototype.Area=google.maps.Polygon.prototype.Area,google.maps.Polyline.prototype.Distance=google.maps.Polygon.prototype.Distance,google.maps.Polyline.prototype.Bounds=google.maps.Polygon.prototype.Bounds,google.maps.Polyline.prototype.GetPointAtDistance=google.maps.Polygon.prototype.GetPointAtDistance,google.maps.Polyline.prototype.GetPointsAtDistance=google.maps.Polygon.prototype.GetPointsAtDistance,google.maps.Polyline.prototype.GetIndexAtDistance=google.maps.Polygon.prototype.GetIndexAtDistance,google.maps.Polyline.prototype.Bearing=google.maps.Polygon.prototype.Bearing;var Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return o[t]||"&amp;"}function i(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function r(t){return t instanceof a?""+t:t||0===t?(t=""+t,l.test(t)?t.replace(h,e):t):""}function s(t){return t||0===t?u(t)&&0===t.length?!0:!1:!0}var n={},a=t,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/[&<>"'`]/g,l=/[&<>"'`]/;n.extend=i;var c=Object.prototype.toString;n.toString=c;var p=function(t){return"function"==typeof t};p(/x/)&&(p=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)});var p;n.isFunction=p;var u=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===c.call(t):!1};return n.isArray=u,n.escapeExpression=r,n.isEmpty=s,n}(t),i=function(){"use strict";function t(t,e){var r;e&&e.firstLine&&(r=e.firstLine,t+=" - "+r+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),n=0;i.length>n;n++)this[i[n]]=s[i[n]];r&&(this.lineNumber=r,this.column=e.firstColumn)}var e,i=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=Error(),e=t}(),r=function(t,e){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},r(this)}function r(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new o("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var r=i.inverse||function(){},s=i.fn;return u(e)&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?r(this):p(e)?e.length>0?t.helpers.each(e,i):r(this):s(e)}),t.registerHelper("each",function(t,e){var i,r=e.fn,s=e.inverse,n=0,a="";if(u(t)&&(t=t.call(this)),e.data&&(i=m(e.data)),t&&"object"==typeof t)if(p(t))for(var o=t.length;o>n;n++)i&&(i.index=n,i.first=0===n,i.last=n===t.length-1),a+=r(t[n],{data:i});else for(var h in t)t.hasOwnProperty(h)&&(i&&(i.key=h,i.index=n,i.first=0===n),a+=r(t[h],{data:i}),n++);return 0===n&&(a=s(this)),a}),t.registerHelper("if",function(t,e){return u(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||a.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){return u(t)&&(t=t.call(this)),a.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,i){var r=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(r,e)})}function s(t,e){f.log(t,e)}var n={},a=t,o=e,h="1.3.0";n.VERSION=h;var l=4;n.COMPILER_REVISION=l;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=c;var p=a.isArray,u=a.isFunction,g=a.toString,d="[object Object]";n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:f,log:s,registerHelper:function(t,e,i){if(g.call(t)===d){if(i||e)throw new o("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else i&&(e.not=i),this.helpers[t]=e},registerPartial:function(t,e){g.call(t)===d?a.extend(this.partials,t):this.partials[t]=e}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(t>=f.level){var i=f.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};n.logger=f,n.log=s;var m=function(t){var e={};return a.extend(e,t),e};return n.createFrame=m,n}(e,i),s=function(t,e,i){"use strict";function r(t){var e=t&&t[0]||1,i=u;if(e!==i){if(i>e){var r=g[i],s=g[e];throw new p("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+s+").")}throw new p("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new p("No environment passed to template");var i=function(t,i,r,s,n,a){var o=e.VM.invokePartial.apply(this,arguments);if(null!=o)return o;if(e.compile){var h={helpers:s,partials:n,data:a};return n[i]=e.compile(t,{data:void 0!==a},e),n[i](r,h)}throw new p("The partial "+i+" could not be compiled when running in runtime-only mode")},r={escapeExpression:c.escapeExpression,invokePartial:i,programs:[],program:function(t,e,i){var r=this.programs[t];return i?r=a(t,e,i):r||(r=this.programs[t]=a(t,e)),r},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i={},c.extend(i,e),c.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,s){s=s||{};var n,a,o=s.partial?s:e;s.partial||(n=s.helpers,a=s.partials);var h=t.call(r,o,i,n,a,s.data);return s.partial||e.VM.checkRevision(r.compilerInfo),h}}function n(t,e,i){var r=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||i].concat(r))};return s.program=t,s.depth=r.length,s}function a(t,e,i){var r=function(t,r){return r=r||{},e(t,r.data||i)};return r.program=t,r.depth=0,r}function o(t,e,i,r,s,n){var a={partial:!0,helpers:r,partials:s,data:n};if(void 0===t)throw new p("The partial "+e+" could not be found");return t instanceof Function?t(i,a):void 0}function h(){return""}var l={},c=t,p=e,u=i.COMPILER_REVISION,g=i.REVISION_CHANGES;return l.checkRevision=r,l.template=s,l.programWithDepth=n,l.program=a,l.invokePartial=o,l.noop=h,l}(e,i,r),n=function(t,e,i,r,s){"use strict";var n,a=t,o=e,h=i,l=r,c=s,p=function(){var t=new a.HandlebarsEnvironment;return l.extend(t,a),t.SafeString=o,t.Exception=h,t.Utils=l,t.VM=c,t.template=function(e){return c.template(e,t)},t},u=p();return u.create=p,n=u}(r,t,i,e,s),a=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var i,r=t,s={ProgramNode:function(t,i,r,n){var a,o;3===arguments.length?(n=r,r=null):2===arguments.length&&(n=i,i=null),e.call(this,n),this.type="program",this.statements=t,this.strip={},r?(o=r[0],o?(a={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn},this.inverse=new s.ProgramNode(r,i,a)):this.inverse=new s.ProgramNode(r,i),this.strip.right=i.left):i&&(this.strip.left=i.right)},MustacheNode:function(t,i,r,n,a){if(e.call(this,a),this.type="mustache",this.strip=n,null!=r&&r.charAt){var o=r.charAt(3)||r.charAt(2);this.escaped="{"!==o&&"&"!==o}else this.escaped=!!r;this.sexpr=t instanceof s.SexprNode?t:new s.SexprNode(t,i),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,i,r){e.call(this,r),this.type="sexpr",this.hash=i;var s=this.id=t[0],n=this.params=t.slice(1),a=this.eligibleHelper=s.isSimple;this.isHelper=a&&(n.length||i)},PartialNode:function(t,i,r,s){e.call(this,s),this.type="partial",this.partialName=t,this.context=i,this.strip=r},BlockNode:function(t,i,s,n,a){if(e.call(this,a),t.sexpr.id.original!==n.path.original)throw new r(t.sexpr.id.original+" doesn't match "+n.path.original,this);this.type="block",this.mustache=t,this.program=i,this.inverse=s,this.strip={left:t.strip.left,right:n.strip.right},(i||s).strip.left=t.strip.right,(s||i).strip.right=n.strip.left,s&&!i&&(this.isInverse=!0)},ContentNode:function(t,i){e.call(this,i),this.type="content",this.string=t},HashNode:function(t,i){e.call(this,i),this.type="hash",this.pairs=t},IdNode:function(t,i){e.call(this,i),this.type="ID";for(var s="",n=[],a=0,o=0,h=t.length;h>o;o++){var l=t[o].part;if(s+=(t[o].separator||"")+l,".."===l||"."===l||"this"===l){if(n.length>0)throw new r("Invalid path: "+s,this);".."===l?a++:this.isScoped=!0}else n.push(l)}this.original=s,this.parts=n,this.string=n.join("."),this.depth=a,this.isSimple=1===t.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(t,i){e.call(this,i),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,i){e.call(this,i),this.type="DATA",this.id=t},StringNode:function(t,i){e.call(this,i),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,i){e.call(this,i),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,i){e.call(this,i),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,i){e.call(this,i),this.type="comment",this.comment=t}};return i=s}(i),o=function(){"use strict";var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,i,r,s,n,a){var o=a.length-1;switch(n){case 1:return new s.ProgramNode(a[o-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],a[o-1],a[o],this._$);break;case 4:this.$=new s.ProgramNode(a[o-2],a[o-1],a[o],this._$);break;case 5:this.$=new s.ProgramNode(a[o-1],a[o],[],this._$);break;case 6:this.$=new s.ProgramNode(a[o],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[a[o]];break;case 10:a[o-1].push(a[o]),this.$=a[o-1];break;case 11:this.$=new s.BlockNode(a[o-2],a[o-1].inverse,a[o-1],a[o],this._$);break;case 12:this.$=new s.BlockNode(a[o-2],a[o-1],a[o-1].inverse,a[o],this._$);break;case 13:this.$=a[o];break;case 14:this.$=a[o];break;case 15:this.$=new s.ContentNode(a[o],this._$);break;case 16:this.$=new s.CommentNode(a[o],this._$);break;case 17:this.$=new s.MustacheNode(a[o-1],null,a[o-2],t(a[o-2],a[o]),this._$);break;case 18:this.$=new s.MustacheNode(a[o-1],null,a[o-2],t(a[o-2],a[o]),this._$);break;case 19:this.$={path:a[o-1],strip:t(a[o-2],a[o])};break;case 20:this.$=new s.MustacheNode(a[o-1],null,a[o-2],t(a[o-2],a[o]),this._$);break;case 21:this.$=new s.MustacheNode(a[o-1],null,a[o-2],t(a[o-2],a[o]),this._$);break;case 22:this.$=new s.PartialNode(a[o-2],a[o-1],t(a[o-3],a[o]),this._$);break;case 23:this.$=t(a[o-1],a[o]);break;case 24:this.$=new s.SexprNode([a[o-2]].concat(a[o-1]),a[o],this._$);break;case 25:this.$=new s.SexprNode([a[o]],null,this._$);break;case 26:this.$=a[o];break;case 27:this.$=new s.StringNode(a[o],this._$);break;case 28:this.$=new s.IntegerNode(a[o],this._$);break;case 29:this.$=new s.BooleanNode(a[o],this._$);break;case 30:this.$=a[o];break;case 31:a[o-1].isHelper=!0,this.$=a[o-1];break;case 32:this.$=new s.HashNode(a[o],this._$);break;case 33:this.$=[a[o-2],a[o]];break;case 34:this.$=new s.PartialNameNode(a[o],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(a[o],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(a[o],this._$));break;case 37:this.$=new s.DataNode(a[o],this._$);break;case 38:this.$=new s.IdNode(a[o],this._$);break;case 39:a[o-2].push({part:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 40:this.$=[{part:a[o]}];break;case 43:this.$=[];break;case 44:a[o-1].push(a[o]);break;case 47:this.$=[a[o]];break;case 48:a[o-1].push(a[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw Error(t)
},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,r=[0],s=[null],n=[],a=this.table,o="",h=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var p=this.lexer.yylloc;n.push(p);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var g,d,f,m,v,y,k,_,b,P={};;){if(f=r[r.length-1],this.defaultActions[f]?m=this.defaultActions[f]:((null===g||g===void 0)&&(g=e()),m=a[f]&&a[f][g]),m===void 0||!m.length||!m[0]){var S="";if(!c){b=[];for(y in a[f])this.terminals_[y]&&y>2&&b.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(h+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:b})}}if(m[0]instanceof Array&&m.length>1)throw Error("Parse Error: multiple actions possible at state: "+f+", token: "+g);switch(m[0]){case 1:r.push(g),s.push(this.lexer.yytext),n.push(this.lexer.yylloc),r.push(m[1]),g=null,d?(g=d,d=null):(l=this.lexer.yyleng,o=this.lexer.yytext,h=this.lexer.yylineno,p=this.lexer.yylloc,c>0&&c--);break;case 2:if(k=this.productions_[m[1]][1],P.$=s[s.length-k],P._$={first_line:n[n.length-(k||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(k||1)].first_column,last_column:n[n.length-1].last_column},u&&(P._$.range=[n[n.length-(k||1)].range[0],n[n.length-1].range[1]]),v=this.performAction.call(P,o,l,h,this.yy,m[1],s,n),v!==void 0)return v;k&&(r=r.slice(0,2*-1*k),s=s.slice(0,-1*k),n=n.slice(0,-1*k)),r.push(this.productions_[m[1]][0]),s.push(P.$),n.push(P._$),_=a[r[r.length-2]][r[r.length-1]],r.push(_);break;case 3:return!0}}return!0}},r=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===r.length?this.yylloc.first_column:0)+r[r.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,r,s;this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;n.length>a&&(i=this._input.match(this.rules[n[a]]),!i||e&&!(i[0].length>e[0].length)||(e=i,r=a,this.options.flex));a++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,n[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==void 0?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,r){function s(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return i.lexer=r,e.prototype=i,i.Parser=e,new e}();return t=e}(),h=function(t,e){"use strict";function i(t){return t.constructor===n.ProgramNode?t:(s.yy=n,s.parse(t))}var r={},s=t,n=e;return r.parser=s,r.parse=i,r}(o,a),l=function(t){"use strict";function e(){}function i(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var r=i.parse(t),s=(new i.Compiler).compile(r,e);return(new i.JavaScriptCompiler).compile(s,e)}function r(t,e,i){function r(){var r=i.parse(t),s=(new i.Compiler).compile(r,e),n=(new i.JavaScriptCompiler).compile(s,e,void 0,!0);return i.template(n)}if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var s;return function(t,e){return s||(s=r()),s.call(this,t,e)}}var s={},n=t;return s.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,i,r=this.opcodes,s=[],n=0,a=r.length;a>n;n++)if(t=r[n],"DECLARE"===t.opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var o=0;t.args.length>o;o++)i=t.args[o],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var r=this.opcodes[i],s=t.opcodes[i];if(r.opcode!==s.opcode||r.args.length!==s.args.length)return!1;for(var n=0;r.args.length>n;n++)if(r.args[n]!==s.args[n])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;e>i;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var r in i)this.options.knownHelpers[r]=i[r];return this.accept(t)},accept:function(t){var e,i=t.strip||{};return i.left&&this.opcode("strip"),e=this[t.type](t),i.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,i=0,r=e.length;r>i;i++)this.accept(e[i]);return this.isSimple=1===r,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),r=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[r]=i;for(var s=0,n=i.depths.list.length;n>s;s++)e=i.depths.list[s],2>e||this.addDepth(e-1);return r},block:function(t){var e=t.mustache,i=t.program,r=t.inverse;i&&(i=this.compileProgram(i)),r&&(r=this.compileProgram(r));var s=e.sexpr,n=this.classifySexpr(s);"helper"===n?this.helperSexpr(s,i,r):"simple"===n?(this.simpleSexpr(s),this.opcode("pushProgram",i),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,i,r),this.opcode("pushProgram",i),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,r=t.pairs;this.opcode("pushHash");for(var s=0,n=r.length;n>s;s++)e=r[s],i=e[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(t,e,i){var r=t.id,s=r.parts[0],n=null!=e||null!=i;this.opcode("getContext",r.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,n)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var r=this.setupFullMustacheParams(t,e,i),s=t.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",r.length,s);else{if(this.options.knownHelpersOnly)throw new n("You specified knownHelpersOnly, but used the unknown helper "+s,t);this.opcode("invokeHelper",r.length,s,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var i=1,r=t.parts.length;r>i;i++)this.opcode("lookup",t.parts[i])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new n("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,i=0,r=e.length;r>i;i++)this.opcode("lookup",e[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,i=t.eligibleHelper,r=this.options;if(i&&!e){var s=t.id.parts[0];r.knownHelpers[s]?e=!0:r.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,i){var r=t.params;return this.pushParams(r),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),r}},s.precompile=i,s.compile=r,s}(i),c=function(t,e){"use strict";function i(t){this.value=t}function r(){}var s,n=t.COMPILER_REVISION,a=t.REVISION_CHANGES,o=t.log,h=e;r.prototype={nameLookup:function(t,e){var i,s;return 0===t.indexOf("depth")&&(i=!0),s=/^[0-9]+$/.test(e)?t+"["+e+"]":r.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+s+")":s},compilerInfo:function(){var t=n,e=a[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,r){this.environment=t,this.options=e||{},o("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var s,n=t.opcodes;this.i=0;for(var a=n.length;a>this.i;this.i++)s=n[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h("Compile completed with content left on stack");return this.createFunctionContext(r)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,n=this.environment.depths.list.length;n>s;s++)r.push("depth"+this.environment.depths.list[s]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),t)return r.push(a),Function.apply(this,r);var h="function "+(this.name||"")+"("+r.join(",")+") {\n  "+a+"}";return o("debug",h+"\n\n"),h},mergeSource:function(){for(var t,e="",i=0,r=this.source.length;r>i;i++){var s=this.source[i];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var r=this.lastHelper=this.setupHelper(t,e,!0),s=this.nameLookup("depth"+this.lastContext,e,"context"),n="helper = "+r.name+" || "+s;r.paramsInit&&(n+=","+r.paramsInit),this.push("("+n+",helper "+"? helper.call("+r.callParams+") "+": helperMissing.call("+r.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,t,e),r=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),n=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+r+") { "+n+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+n+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i,r=this.popStack();this.options.stringParams&&(i=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),i&&s.types.push("'"+t+"': "+i),s.values.push("'"+t+"': ("+r+")")},compiler:r,compileChildren:function(t,e){for(var i,r,s=t.children,n=0,a=s.length;a>n;n++){i=s[n],r=new this.compiler;var o=this.matchExistingProgram(i);null==o?(this.context.programs.push(""),o=this.context.programs.length,i.index=o,i.name="program"+o,this.context.programs[o]=r.compile(i,e,this.context),this.context.environments[o]=i):(i.index=o,i.name="program"+o)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var r=this.context.environments[e];if(r&&r.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],r=i.depths.list,s=[i.index,i.name,"data"],n=0,a=r.length;a>n;n++)e=r[n],1===e?s.push("depth0"):s.push("depth"+(e-1));return(0===r.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new i(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,r,s,n="",a=this.isInline();if(a){var o=this.popStack(!0);if(o instanceof i)e=o.value,s=!0;else{r=!this.stackSlot;var h=r?this.incrStack():this.topStackName();n="("+this.push(h)+" = "+o+"),",e=this.topStack()}}else e=this.topStack();var l=t.call(this,e);return a?(s||this.popStack(),r&&this.stackSlot--,this.push("("+n+l+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+n+l+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,r=t.length;r>e;e++){var s=t[e];s instanceof i?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),r=(e?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof i)return r.value;if(!e){if(!this.stackSlot)throw new h("Invalid stack pop");this.stackSlot--}return r},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,r=e[e.length-1];return!t&&r instanceof i?r.value:r},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var r=[],s=this.setupParams(t,r,i),n=this.nameLookup("helpers",e,"helper");return{params:r,paramsInit:s,name:n,callParams:["depth0"].concat(r).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(r).join(", ")}},setupOptions:function(t,e){var i,r,s,n=[],a=[],o=[];n.push("hash:"+this.popStack()),this.options.stringParams&&(n.push("hashTypes:"+this.popStack()),n.push("hashContexts:"+this.popStack())),r=this.popStack(),s=this.popStack(),(s||r)&&(s||(this.context.aliases.self="this",s="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),n.push("inverse:"+r),n.push("fn:"+s));for(var h=0;t>h;h++)i=this.popStack(),e.push(i),this.options.stringParams&&(o.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(n.push("contexts:["+a.join(",")+"]"),n.push("types:["+o.join(",")+"]")),this.options.data&&n.push("data:data"),n},setupParams:function(t,e,i){var r="{"+this.setupOptions(t,e).join(",")+"}";return i?(this.useRegister("options"),e.push("options"),"options="+r):(e.push(r),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=r.RESERVED_WORDS={},p=0,u=l.length;u>p;p++)c[l[p]]=!0;return r.isValidJavaScriptVariableName=function(t){return!r.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},s=r}(r,i),p=function(t,e,i,r,s){"use strict";var n,a=t,o=e,h=i.parser,l=i.parse,c=r.Compiler,p=r.compile,u=r.precompile,g=s,d=a.create,f=function(){var t=d();return t.compile=function(e,i){return p(e,i,t)},t.precompile=function(e,i){return u(e,i,t)},t.AST=o,t.Compiler=c,t.JavaScriptCompiler=g,t.Parser=h,t.parse=l,t};return a=f(),a.create=f,n=a}(n,a,h,l,c);return p}();RichMarker.prototype=new google.maps.OverlayView,window.RichMarker=RichMarker,RichMarker.prototype.getVisible=function(){return this.get("visible")},RichMarker.prototype.getVisible=RichMarker.prototype.getVisible,RichMarker.prototype.setVisible=function(t){this.set("visible",t)},RichMarker.prototype.setVisible=RichMarker.prototype.setVisible,RichMarker.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())},RichMarker.prototype.visible_changed=RichMarker.prototype.visible_changed,RichMarker.prototype.setFlat=function(t){this.set("flat",!!t)},RichMarker.prototype.setFlat=RichMarker.prototype.setFlat,RichMarker.prototype.getFlat=function(){return this.get("flat")},RichMarker.prototype.getFlat=RichMarker.prototype.getFlat,RichMarker.prototype.getWidth=function(){return this.get("width")},RichMarker.prototype.getWidth=RichMarker.prototype.getWidth,RichMarker.prototype.getHeight=function(){return this.get("height")},RichMarker.prototype.getHeight=RichMarker.prototype.getHeight,RichMarker.prototype.setShadow=function(t){this.set("shadow",t),this.flat_changed()},RichMarker.prototype.setShadow=RichMarker.prototype.setShadow,RichMarker.prototype.getShadow=function(){return this.get("shadow")},RichMarker.prototype.getShadow=RichMarker.prototype.getShadow,RichMarker.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())},RichMarker.prototype.flat_changed=RichMarker.prototype.flat_changed,RichMarker.prototype.setZIndex=function(t){this.set("zIndex",t)},RichMarker.prototype.setZIndex=RichMarker.prototype.setZIndex,RichMarker.prototype.getZIndex=function(){return this.get("zIndex")},RichMarker.prototype.getZIndex=RichMarker.prototype.getZIndex,RichMarker.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},RichMarker.prototype.zIndex_changed=RichMarker.prototype.zIndex_changed,RichMarker.prototype.getDraggable=function(){return this.get("draggable")},RichMarker.prototype.getDraggable=RichMarker.prototype.getDraggable,RichMarker.prototype.setDraggable=function(t){this.set("draggable",!!t)},RichMarker.prototype.setDraggable=RichMarker.prototype.setDraggable,RichMarker.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},RichMarker.prototype.draggable_changed=RichMarker.prototype.draggable_changed,RichMarker.prototype.getPosition=function(){return this.get("position")},RichMarker.prototype.getPosition=RichMarker.prototype.getPosition,RichMarker.prototype.setPosition=function(t){this.set("position",t)},RichMarker.prototype.setPosition=RichMarker.prototype.setPosition,RichMarker.prototype.position_changed=function(){this.draw()},RichMarker.prototype.position_changed=RichMarker.prototype.position_changed,RichMarker.prototype.getAnchor=function(){return this.get("anchor")},RichMarker.prototype.getAnchor=RichMarker.prototype.getAnchor,RichMarker.prototype.setAnchor=function(t){this.set("anchor",t)},RichMarker.prototype.setAnchor=RichMarker.prototype.setAnchor,RichMarker.prototype.anchor_changed=function(){this.draw()},RichMarker.prototype.anchor_changed=RichMarker.prototype.anchor_changed,RichMarker.prototype.htmlToDocumentFragment_=function(t){var e=document.createElement("DIV");if(e.innerHTML=t,1==e.childNodes.length)return e.removeChild(e.firstChild);for(var i=document.createDocumentFragment();e.firstChild;)i.appendChild(e.firstChild);return i},RichMarker.prototype.removeChildren_=function(t){if(t)for(var e;e=t.firstChild;)t.removeChild(e)},RichMarker.prototype.setContent=function(t){this.set("content",t)},RichMarker.prototype.setContent=RichMarker.prototype.setContent,RichMarker.prototype.getContent=function(){return this.get("content")},RichMarker.prototype.getContent=RichMarker.prototype.getContent,RichMarker.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var t=this.getContent();if(t){"string"==typeof t&&(t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),t=this.htmlToDocumentFragment_(t)),this.markerContent_.appendChild(t);for(var e,i=this,r=this.markerContent_.getElementsByTagName("IMG"),s=0;e=r[s];s++)google.maps.event.addDomListener(e,"mousedown",function(t){i.getDraggable()&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1)}),google.maps.event.addDomListener(e,"load",function(){i.draw()});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}},RichMarker.prototype.content_changed=RichMarker.prototype.content_changed,RichMarker.prototype.setCursor_=function(t){if(this.ready_){var e="";-1!==navigator.userAgent.indexOf("Gecko/")?("dragging"==t&&(e="-moz-grabbing"),"dragready"==t&&(e="-moz-grab"),"draggable"==t&&(e="pointer")):(("dragging"==t||"dragready"==t)&&(e="move"),"draggable"==t&&(e="pointer")),this.markerWrapper_.style.cursor!=e&&(this.markerWrapper_.style.cursor=e)}},RichMarker.prototype.startDrag=function(t){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var e=this.getMap();this.mapDraggable_=e.get("draggable"),e.set("draggable",!1),this.mouseX_=t.clientX,this.mouseY_=t.clientY,this.setCursor_("dragready"),this.markerWrapper_.style.MozUserSelect="none",this.markerWrapper_.style.KhtmlUserSelect="none",this.markerWrapper_.style.WebkitUserSelect="none",this.markerWrapper_.unselectable="on",this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,"dragstart")}},RichMarker.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())},RichMarker.prototype.drag=function(t){if(!this.getDraggable()||!this.dragging_)return this.stopDrag(),void 0;
var e=this.mouseX_-t.clientX,i=this.mouseY_-t.clientY;this.mouseX_=t.clientX,this.mouseY_=t.clientY;var r=parseInt(this.markerWrapper_.style.left,10)-e,s=parseInt(this.markerWrapper_.style.top,10)-i;this.markerWrapper_.style.left=r+"px",this.markerWrapper_.style.top=s+"px";var n=this.getOffset_(),a=new google.maps.Point(r-n.width,s-n.height),o=this.getProjection();this.setPosition(o.fromDivPixelToLatLng(a)),this.setCursor_("dragging"),google.maps.event.trigger(this,"drag")},RichMarker.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_("")},RichMarker.prototype.addDragging_=function(t){if(t){var e=this;this.draggableListener_=google.maps.event.addDomListener(t,"mousedown",function(t){e.startDrag(t)}),this.setCursor_("draggable")}},RichMarker.prototype.addDraggingListeners_=function(){var t=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(e){t.drag(e)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(){t.stopDrag(),t.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(window,"mousemove",function(e){t.drag(e)},!0),google.maps.event.addDomListener(window,"mouseup",function(){t.stopDrag()},!0)]},RichMarker.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var t,e=0;t=this.draggingListeners_[e];e++)google.maps.event.removeListener(t);this.draggingListeners_.length=0}},RichMarker.prototype.getOffset_=function(){var t=this.getAnchor();if("object"==typeof t)return t;var e=new google.maps.Size(0,0);if(!this.markerContent_)return e;var i=this.markerContent_.offsetWidth,r=this.markerContent_.offsetHeight;switch(t){case RichMarkerPosition.TOP_LEFT:break;case RichMarkerPosition.TOP:e.width=-i/2;break;case RichMarkerPosition.TOP_RIGHT:e.width=-i;break;case RichMarkerPosition.LEFT:e.height=-r/2;break;case RichMarkerPosition.MIDDLE:e.width=-i/2,e.height=-r/2;break;case RichMarkerPosition.RIGHT:e.width=-i,e.height=-r/2;break;case RichMarkerPosition.BOTTOM_LEFT:e.height=-r;break;case RichMarkerPosition.BOTTOM:e.width=-i/2,e.height=-r;break;case RichMarkerPosition.BOTTOM_RIGHT:e.width=-i,e.height=-r}return e},RichMarker.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute"),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?"":"none",!this.markerContent_){this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_);var t=this;google.maps.event.addDomListener(this.markerContent_,"click",function(){google.maps.event.trigger(t,"click")}),google.maps.event.addDomListener(this.markerContent_,"mouseover",function(){google.maps.event.trigger(t,"mouseover")}),google.maps.event.addDomListener(this.markerContent_,"mouseout",function(){google.maps.event.trigger(t,"mouseout")})}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,"ready")},RichMarker.prototype.onAdd=RichMarker.prototype.onAdd,RichMarker.prototype.draw=function(){if(this.ready_&&!this.dragging_){var t=this.getProjection();if(t){var e=this.get("position"),i=t.fromLatLngToDivPixel(e),r=this.getOffset_();this.markerWrapper_.style.top=i.y+r.height+"px",this.markerWrapper_.style.left=i.x+r.width+"px";var s=this.markerContent_.offsetHeight,n=this.markerContent_.offsetWidth;n!=this.get("width")&&this.set("width",n),s!=this.get("height")&&this.set("height",s)}}},RichMarker.prototype.draw=RichMarker.prototype.draw,RichMarker.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},RichMarker.prototype.onRemove=RichMarker.prototype.onRemove;var RichMarkerPosition={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=RichMarkerPosition,function(t){"use strict";var e={init:function(i){return this.each(function(){this.self=t(this),e.destroy.call(this.self),this.opt=t.extend(!0,{},t.fn.raty.defaults,i),e._adjustCallback.call(this),e._adjustNumber.call(this),e._adjustHints.call(this),this.opt.score=e._adjustedScore.call(this,this.opt.score),"img"!==this.opt.starType&&e._adjustStarType.call(this),e._adjustPath.call(this),e._createStars.call(this),this.opt.cancel&&e._createCancel.call(this),this.opt.precision&&e._adjustPrecision.call(this),e._createScore.call(this),e._apply.call(this,this.opt.score),e._setTitle.call(this,this.opt.score),e._target.call(this,this.opt.score),this.opt.readOnly?e._lock.call(this):(this.style.cursor="pointer",e._binds.call(this))})},_adjustCallback:function(){for(var t=["number","readOnly","score","scoreName","target"],e=0;t.length>e;e++)"function"==typeof this.opt[t[e]]&&(this.opt[t[e]]=this.opt[t[e]].call(this))},_adjustedScore:function(t){return t?e._between(t,0,this.opt.number):t},_adjustHints:function(){if(this.opt.hints||(this.opt.hints=[]),this.opt.halfShow||this.opt.half)for(var t=this.opt.precision?10:2,e=0;this.opt.number>e;e++){var i=this.opt.hints[e];"[object Array]"!==Object.prototype.toString.call(i)&&(i=[i]),this.opt.hints[e]=[];for(var r=0;t>r;r++){var s=i[r],n=i[i.length-1];void 0===n&&(n=null),this.opt.hints[e][r]=void 0===s?n:s}}},_adjustNumber:function(){this.opt.number=e._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var t=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var e=0;t.length>e;e++)this.opt[t[e]]=this.opt[t[e]].replace(".","-")},_apply:function(t){e._fill.call(this,t),t&&(t>0&&this.score.val(t),e._roundStars.call(this,t))},_between:function(t,e,i){return Math.min(Math.max(parseFloat(t),e),i)},_binds:function(){this.cancel&&(e._bindOverCancel.call(this),e._bindClickCancel.call(this),e._bindOutCancel.call(this)),e._bindOver.call(this),e._bindClick.call(this),e._bindOut.call(this)},_bindClick:function(){var i=this;i.stars.on("click.raty",function(r){var s=!0,n=i.opt.half||i.opt.precision?i.self.data("score"):this.alt||t(this).data("alt");i.opt.click&&(s=i.opt.click.call(i,+n,r)),(s||void 0===s)&&(i.opt.half&&!i.opt.precision&&(n=e._roundHalfScore.call(i,n)),e._apply.call(i,n))})},_bindClickCancel:function(){var t=this;t.cancel.on("click.raty",function(e){t.score.removeAttr("value"),t.opt.click&&t.opt.click.call(t,null,e)})},_bindOut:function(){var t=this;t.self.on("mouseleave.raty",function(i){var r=+t.score.val()||void 0;e._apply.call(t,r),e._target.call(t,r,i),e._resetTitle.call(t),t.opt.mouseout&&t.opt.mouseout.call(t,r,i)})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(i){var r=t.opt.cancelOff;if("img"!==t.opt.starType&&(r=t.opt.cancelClass+" "+r),e._setIcon.call(t,this,r),t.opt.mouseout){var s=+t.score.val()||void 0;t.opt.mouseout.call(t,s,i)}})},_bindOver:function(){var t=this,i=t.opt.half?"mousemove.raty":"mouseover.raty";t.stars.on(i,function(i){var r=e._getScoreByPosition.call(t,i,this);e._fill.call(t,r),t.opt.half&&(e._roundStars.call(t,r,i),e._setTitle.call(t,r,i),t.self.data("score",r)),e._target.call(t,r,i),t.opt.mouseover&&t.opt.mouseover.call(t,r,i)})},_bindOverCancel:function(){var t=this;t.cancel.on("mouseover.raty",function(i){var r=t.opt.path+t.opt.starOff,s=t.opt.cancelOn;"img"===t.opt.starType?t.stars.attr("src",r):(s=t.opt.cancelClass+" "+s,t.stars.attr("class",r)),e._setIcon.call(t,this,s),e._target.call(t,null,i),t.opt.mouseover&&t.opt.mouseover.call(t,null)})},_buildScoreField:function(){return t("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var e=this.opt.path+this.opt.cancelOff,i=t("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?i.attr({src:e,alt:"x"}):i.attr("data-alt","x").addClass(e),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(i):this.self.append("&#160;").append(i),this.cancel=i},_createScore:function(){var i=t(this.opt.targetScore);this.score=i.length?i:e._buildScoreField.call(this)},_createStars:function(){for(var i=1;this.opt.number>=i;i++){var r=e._nameForIndex.call(this,i),s={alt:i,src:this.opt.path+this.opt[r]};"img"!==this.opt.starType&&(s={"data-alt":i,"class":s.src}),s.title=e._getHint.call(this,i),t("<"+this.opt.starType+" />",s).appendTo(this),this.opt.space&&this.self.append(this.opt.number>i?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(e){t(this).text(e),t.error(e)},_fill:function(t){for(var i=0,r=1;this.stars.length>=r;r++){var s,n=this.stars[r-1],a=e._turnOn.call(this,r,t);if(this.opt.iconRange&&this.opt.iconRange.length>i){var o=this.opt.iconRange[i];s=e._getRangeIcon.call(this,o,a),o.range>=r&&e._setIcon.call(this,n,s),r===o.range&&i++}else s=this.opt[a?"starOn":"starOff"],e._setIcon.call(this,n,s)}},_getFirstDecimal:function(t){var e=(""+t).split(".")[1],i=0;return e&&(i=parseInt(e.charAt(0),10),"9999"===e.slice(1,5)&&i++),i},_getRangeIcon:function(t,e){return e?t.on||this.opt.starOn:t.off||this.opt.starOff},_getScoreByPosition:function(i,r){var s=parseInt(r.alt||r.getAttribute("data-alt"),10);if(this.opt.half){var n=e._getWidth.call(this),a=parseFloat((i.pageX-t(r).offset().left)/n);s=s-1+a}return s},_getHint:function(t,i){if(0!==t&&!t)return this.opt.noRatedMsg;var r=e._getFirstDecimal.call(this,t),s=Math.ceil(t),n=this.opt.hints[(s||1)-1],a=n,o=!i||this.move;return this.opt.precision?(o&&(r=0===r?9:r-1),a=n[r]):(this.opt.halfShow||this.opt.half)&&(r=o&&0===r?1:r>5?1:0,a=n[r]),""===a?"":a||t},_getWidth:function(){var t=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));return t||e._error.call(this,"Could not get the icon width!"),t},_lock:function(){var t=e._getHint.call(this,this.score.val());this.style.cursor="",this.title=t,this.score.prop("readonly",!0),this.stars.prop("title",t),this.cancel&&this.cancel.hide(),this.self.data("readonly",!0)},_nameForIndex:function(t){return this.opt.score&&this.opt.score>=t?"starOn":"starOff"},_resetTitle:function(){for(var t=0;this.opt.number>t;t++)this.stars[t].title=e._getHint.call(this,t+1)},_roundHalfScore:function(t){var i=parseInt(t,10),r=e._getFirstDecimal.call(this,t);return 0!==r&&(r=r>5?1:.5),i+r},_roundStars:function(t,i){var r,s=(t%1).toFixed(2);if(i||this.move?r=s>.5?"starOn":"starHalf":s>this.opt.round.down&&(r="starOn",this.opt.halfShow&&this.opt.round.up>s?r="starHalf":this.opt.round.full>s&&(r="starOff")),r){var n=this.opt[r],a=this.stars[Math.ceil(t)-1];e._setIcon.call(this,a,n)}},_setIcon:function(t,e){t["img"===this.opt.starType?"src":"className"]=this.opt.path+e},_setTarget:function(t,e){e&&(e=(""+this.opt.targetFormat).replace("{score}",e)),t.is(":input")?t.val(e):t.html(e)},_setTitle:function(t,i){if(t){var r=parseInt(Math.ceil(t),10),s=this.stars[r-1];s.title=e._getHint.call(this,t,i)}},_target:function(i,r){if(this.opt.target){var s=t(this.opt.target);s.length||e._error.call(this,"Target selector invalid or missing!");var n=r&&"mouseover"===r.type;if(void 0===i)i=this.opt.targetText;else if(null===i)i=n?this.opt.cancelHint:this.opt.targetText;else{"hint"===this.opt.targetType?i=e._getHint.call(this,i,r):this.opt.precision&&(i=parseFloat(i).toFixed(1));var a=r&&"mousemove"===r.type;n||a||this.opt.targetKeep||(i=this.opt.targetText)}e._setTarget.call(this,s,i)}},_turnOn:function(t,e){return this.opt.single?t===e:e>=t},_unlock:function(){this.style.cursor="pointer",this.removeAttribute("title"),this.score.removeAttr("readonly"),this.self.data("readonly",!1);for(var t=0;this.opt.number>t;t++)this.stars[t].title=e._getHint.call(this,t+1);this.cancel&&this.cancel.css("display","")},cancel:function(i){return this.each(function(){var r=t(this);r.data("readonly")!==!0&&(e[i?"click":"score"].call(r,null),this.score.removeAttr("value"))})},click:function(i){return this.each(function(){t(this).data("readonly")!==!0&&(i=e._adjustedScore.call(this,i),e._apply.call(this,i),this.opt.click&&this.opt.click.call(this,i,t.Event("click")),e._target.call(this,i))})},destroy:function(){return this.each(function(){var e=t(this),i=e.data("raw");i?e.off(".raty").empty().css({cursor:i.style.cursor}).removeData("readonly"):e.data("raw",e.clone()[0])})},getScore:function(){var t,e=[];return this.each(function(){t=this.score.val(),e.push(t?+t:void 0)}),e.length>1?e:e[0]},move:function(i){return this.each(function(){var r=parseInt(i,10),s=e._getFirstDecimal.call(this,i);r>=this.opt.number&&(r=this.opt.number-1,s=10);var n=e._getWidth.call(this),a=n/10,o=t(this.stars[r]),h=o.offset().left+a*s,l=t.Event("mousemove",{pageX:h});this.move=!0,o.trigger(l),this.move=!1})},readOnly:function(i){return this.each(function(){var r=t(this);r.data("readonly")!==i&&(i?(r.off(".raty").children("img").off(".raty"),e._lock.call(this)):(e._binds.call(this),e._unlock.call(this)),r.data("readonly",i))})},reload:function(){return e.set.call(this,{})},score:function(){var i=t(this);return arguments.length?e.setScore.apply(i,arguments):e.getScore.call(i)},set:function(e){return this.each(function(){t(this).raty(t.extend({},this.opt,e))})},setScore:function(i){return this.each(function(){t(this).data("readonly")!==!0&&(i=e._adjustedScore.call(this,i),e._apply.call(this,i),e._target.call(this,i))})}};t.fn.raty=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(t.error("Method "+i+" does not exist!"),void 0):e.init.apply(this,arguments)},t.fn.raty.defaults={cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:"images/",precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,space:!1,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",target:void 0,targetFormat:"{score}",targetKeep:!1,targetScore:void 0,targetText:"",targetType:"hint"}}(jQuery),function(t,e){"use strict";var i=i||function(i){var r={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5},s={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},n={},a={hasTouch:"ontouchstart"in e.documentElement||t.navigator.msPointerEnabled,eventType:function(t){var e={down:a.hasTouch?"touchstart":"mousedown",move:a.hasTouch?"touchmove":"mousemove",up:a.hasTouch?"touchend":"mouseup",out:a.hasTouch?"touchcancel":"mouseout"};return e[t]},page:function(t,e){return a.hasTouch&&e.touches.length&&e.touches[0]?e.touches[0]["page"+t]:e["page"+t]},klass:{has:function(t,e){return-1!==t.className.indexOf(e)},add:function(t,e){!a.klass.has(t,e)&&r.addBodyClasses&&(t.className+=" "+e)},remove:function(t,e){r.addBodyClasses&&(t.className=t.className.replace(e,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(t){return"function"==typeof n[t]?n[t].call():void 0},vendor:function(){var t,i=e.createElement("div"),r="webkit Moz O ms".split(" ");for(t in r)if(i.style[r[t]+"Transition"]!==void 0)return r[t]},transitionCallback:function(){return"Moz"===s.vendor||"ms"===s.vendor?"transitionend":s.vendor+"TransitionEnd"},canTransform:function(){return r.element.style[s.vendor+"Transform"]!==void 0},deepExtend:function(t,e){var i;for(i in e)e[i]&&e[i].constructor&&e[i].constructor===Object?(t[i]=t[i]||{},a.deepExtend(t[i],e[i])):t[i]=e[i];return t},angleOfDrag:function(t,e){var i,r;return r=Math.atan2(-(s.startDragY-e),s.startDragX-t),0>r&&(r+=2*Math.PI),i=Math.floor(r*(180/Math.PI)-180),0>i&&i>-180&&(i=360-Math.abs(i)),Math.abs(i)},events:{addEvent:function(t,e,i){return t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):void 0},removeEvent:function(t,e,i){return t.addEventListener?t.removeEventListener(e,i,!1):t.attachEvent?t.detachEvent("on"+e,i):void 0},prevent:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},parentUntil:function(t,e){for(var i="string"==typeof e;t.parentNode;){if(i&&t.getAttribute&&t.getAttribute(e))return t;if(!i&&t===e)return t;t=t.parentNode}return null}},o={translate:{get:{matrix:function(e){if(a.canTransform()){var i=t.getComputedStyle(r.element)[s.vendor+"Transform"].match(/\((.*)\)/),n=8;return i?(i=i[1].split(","),16===i.length&&(e+=n),parseInt(i[e],10)):0}return parseInt(r.element.style.left,10)}},easeCallback:function(){r.element.style[s.vendor+"Transition"]="",s.translation=o.translate.get.matrix(4),s.easing=!1,clearInterval(s.animatingInterval),0===s.easingTo&&(a.klass.remove(e.body,"snapjs-right"),a.klass.remove(e.body,"snapjs-left")),a.dispatchEvent("animated"),a.events.removeEvent(r.element,a.transitionCallback(),o.translate.easeCallback)},easeTo:function(t){a.canTransform()?(s.easing=!0,s.easingTo=t,r.element.style[s.vendor+"Transition"]="all "+r.transitionSpeed+"s "+r.easing,s.animatingInterval=setInterval(function(){a.dispatchEvent("animating")},1),a.events.addEvent(r.element,a.transitionCallback(),o.translate.easeCallback),o.translate.x(t)):(s.translation=t,o.translate.x(t)),0===t&&(r.element.style[s.vendor+"Transform"]="")},x:function(i){if(!("left"===r.disable&&i>0||"right"===r.disable&&0>i))if(r.hyperextensible||(i===r.maxPosition||i>r.maxPosition?i=r.maxPosition:(i===r.minPosition||r.minPosition>i)&&(i=r.minPosition)),i=parseInt(i,10),isNaN(i)&&(i=0),a.canTransform()){var n="translate3d("+i+"px, 0,0)";r.element.style[s.vendor+"Transform"]=n}else r.element.style.width=(t.innerWidth||e.documentElement.clientWidth)+"px",r.element.style.left=i+"px",r.element.style.right=""}},drag:{listen:function(){s.translation=0,s.easing=!1,a.events.addEvent(r.element,a.eventType("down"),o.drag.startDrag),a.events.addEvent(r.element,a.eventType("move"),o.drag.dragging),a.events.addEvent(r.element,a.eventType("up"),o.drag.endDrag)},stopListening:function(){a.events.removeEvent(r.element,a.eventType("down"),o.drag.startDrag),a.events.removeEvent(r.element,a.eventType("move"),o.drag.dragging),a.events.removeEvent(r.element,a.eventType("up"),o.drag.endDrag)},startDrag:function(t){var e=t.target?t.target:t.srcElement,i=a.parentUntil(e,"data-snap-ignore");if(i)return a.dispatchEvent("ignore"),void 0;if(r.dragger){var n=a.parentUntil(e,r.dragger);if(!n&&s.translation!==r.minPosition&&s.translation!==r.maxPosition)return}a.dispatchEvent("start"),r.element.style[s.vendor+"Transition"]="",s.isDragging=!0,s.hasIntent=null,s.intentChecked=!1,s.startDragX=a.page("X",t),s.startDragY=a.page("Y",t),s.dragWatchers={current:0,last:0,hold:0,state:""},s.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(t){if(s.isDragging&&r.touchToDrag){var i,n=a.page("X",t),h=a.page("Y",t),l=s.translation,c=o.translate.get.matrix(4),p=n-s.startDragX,u=c>0,g=p;if(s.intentChecked&&!s.hasIntent)return;if(r.addBodyClasses&&(c>0?(a.klass.add(e.body,"snapjs-left"),a.klass.remove(e.body,"snapjs-right")):0>c&&(a.klass.add(e.body,"snapjs-right"),a.klass.remove(e.body,"snapjs-left"))),s.hasIntent===!1||null===s.hasIntent){var d=a.angleOfDrag(n,h),f=d>=0&&r.slideIntent>=d||360>=d&&d>360-r.slideIntent,m=d>=180&&180+r.slideIntent>=d||180>=d&&d>=180-r.slideIntent;s.hasIntent=m||f?!0:!1,s.intentChecked=!0}if(r.minDragDistance>=Math.abs(n-s.startDragX)||s.hasIntent===!1)return;a.events.prevent(t),a.dispatchEvent("drag"),s.dragWatchers.current=n,s.dragWatchers.last>n?("left"!==s.dragWatchers.state&&(s.dragWatchers.state="left",s.dragWatchers.hold=n),s.dragWatchers.last=n):n>s.dragWatchers.last&&("right"!==s.dragWatchers.state&&(s.dragWatchers.state="right",s.dragWatchers.hold=n),s.dragWatchers.last=n),u?(c>r.maxPosition&&(i=(c-r.maxPosition)*r.resistance,g=p-i),s.simpleStates={opening:"left",towards:s.dragWatchers.state,hyperExtending:c>r.maxPosition,halfway:c>r.maxPosition/2,flick:Math.abs(s.dragWatchers.current-s.dragWatchers.hold)>r.flickThreshold,translation:{absolute:c,relative:p,sinceDirectionChange:s.dragWatchers.current-s.dragWatchers.hold,percentage:100*(c/r.maxPosition)}}):(r.minPosition>c&&(i=(c-r.minPosition)*r.resistance,g=p-i),s.simpleStates={opening:"right",towards:s.dragWatchers.state,hyperExtending:r.minPosition>c,halfway:r.minPosition/2>c,flick:Math.abs(s.dragWatchers.current-s.dragWatchers.hold)>r.flickThreshold,translation:{absolute:c,relative:p,sinceDirectionChange:s.dragWatchers.current-s.dragWatchers.hold,percentage:100*(c/r.minPosition)}}),o.translate.x(g+l)}},endDrag:function(t){if(s.isDragging){a.dispatchEvent("end");var e=o.translate.get.matrix(4);if(0===s.dragWatchers.current&&0!==e&&r.tapToClose)return a.dispatchEvent("close"),a.events.prevent(t),o.translate.easeTo(0),s.isDragging=!1,s.startDragX=0,void 0;"left"===s.simpleStates.opening?s.simpleStates.halfway||s.simpleStates.hyperExtending||s.simpleStates.flick?s.simpleStates.flick&&"left"===s.simpleStates.towards?o.translate.easeTo(0):(s.simpleStates.flick&&"right"===s.simpleStates.towards||s.simpleStates.halfway||s.simpleStates.hyperExtending)&&o.translate.easeTo(r.maxPosition):o.translate.easeTo(0):"right"===s.simpleStates.opening&&(s.simpleStates.halfway||s.simpleStates.hyperExtending||s.simpleStates.flick?s.simpleStates.flick&&"right"===s.simpleStates.towards?o.translate.easeTo(0):(s.simpleStates.flick&&"left"===s.simpleStates.towards||s.simpleStates.halfway||s.simpleStates.hyperExtending)&&o.translate.easeTo(r.minPosition):o.translate.easeTo(0)),s.isDragging=!1,s.startDragX=a.page("X",t)}}}},h=function(t){t.element&&(a.deepExtend(r,t),s.vendor=a.vendor(),o.drag.listen())};this.open=function(t){a.dispatchEvent("open"),a.klass.remove(e.body,"snapjs-expand-left"),a.klass.remove(e.body,"snapjs-expand-right"),"left"===t?(s.simpleStates.opening="left",s.simpleStates.towards="right",a.klass.add(e.body,"snapjs-left"),a.klass.remove(e.body,"snapjs-right"),o.translate.easeTo(r.maxPosition)):"right"===t&&(s.simpleStates.opening="right",s.simpleStates.towards="left",a.klass.remove(e.body,"snapjs-left"),a.klass.add(e.body,"snapjs-right"),o.translate.easeTo(r.minPosition))},this.close=function(){a.dispatchEvent("close"),o.translate.easeTo(0)},this.expand=function(i){var r=t.innerWidth||e.documentElement.clientWidth;"left"===i?(a.dispatchEvent("expandLeft"),a.klass.add(e.body,"snapjs-expand-left"),a.klass.remove(e.body,"snapjs-expand-right")):(a.dispatchEvent("expandRight"),a.klass.add(e.body,"snapjs-expand-right"),a.klass.remove(e.body,"snapjs-expand-left"),r*=-1),o.translate.easeTo(r)},this.on=function(t,e){return n[t]=e,this},this.off=function(t){n[t]&&(n[t]=!1)},this.enable=function(){a.dispatchEvent("enable"),o.drag.listen()},this.disable=function(){a.dispatchEvent("disable"),o.drag.stopListening()},this.settings=function(t){a.deepExtend(r,t)},this.state=function(){var t,e=o.translate.get.matrix(4);return t=e===r.maxPosition?"left":e===r.minPosition?"right":"closed",{state:t,info:s.simpleStates}},h(i)};"undefined"!=typeof module&&module.exports&&(module.exports=i),"undefined"==typeof ender&&(this.Snap=i),"function"==typeof define&&define.amd&&define("snap",[],function(){return i})}.call(this,window,document);var directionsDisplay,directionsService,map,placesService,iconSize={width:25,height:25},stepDistances=[],urlOptions={};urlOptions.queryDelay=parseInt($.url().param("queryDelay"))||250,urlOptions.step=parseInt($.url().param("step"))||5,urlOptions.tick=parseInt($.url().param("tick"))||100,urlOptions.iter=parseInt($.url().param("iter"))||1,urlOptions.poisPerPoint=parseInt($.url().param("poisPerPoint"))||1,urlOptions.removePois=$.url().param("removePois")||"true",urlOptions.name=$.url().param("name")||"Scott%20Streit",urlOptions.email=$.url().param("email")||"scott%40scottstreit.com";var destinationPoint,animationFinished=!1,eol,k=0,stepnum=0,speed="",lastVertex=1,poiMarkers=[],poiRichMarkers=[],poiRemovalLocations=[],polyline,poly2;google.maps.event.addDomListener(window,"load",initialize);